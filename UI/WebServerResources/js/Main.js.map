{"version":3,"sources":["Main/Main.app.js"],"names":["LoginController","$scope","$timeout","Dialog","$mdDialog","Authentication","login","vm","creds","then","url","window","location","href","reload","msg","alert","l","error","showAbout","$event","AboutDialogController","this","closeDialog","hide","show","targetEvent","templateUrl","controller","controllerAs","$inject","username","cookieUsername","password","showLogin","angular","module"],"mappings":"CAGA,WACE,YAQA,SAASA,GAAgBC,EAAQC,EAAUC,EAAQC,EAAWC,GAU5D,QAASC,KAUP,MATAD,GAAeC,MAAMC,EAAGC,OACrBC,KAAK,SAASC,GACTC,OAAOC,SAASC,OAASH,EAC3BC,OAAOC,SAASE,QAAO,GAEvBH,OAAOC,SAASC,KAAOH,GACxB,SAASK,GACVZ,EAAOa,MAAMC,EAAE,yBAA0BF,EAAIG,UAE1C,EAGT,QAASC,GAAUC,GAQjB,QAASC,GAAsBjB,GAC7BkB,KAAKC,YAAc,WACjBnB,EAAUoB,QATdpB,EAAUqB,MACRC,YAAaN,EACbO,YAAa,gBACbC,WAAYP,EACZQ,aAAc,UAEhBR,EAAsBS,SAAW,aA7BnC,GAAIvB,GAAKe,IAETf,GAAGC,OAAUuB,SAAUC,eAAgBC,SAAU,MACjD1B,EAAGD,MAAQA,EACXC,EAAGY,UAAYA,EAEfZ,EAAG2B,WAAY,EACfhC,EAAS,WAAaK,EAAG2B,WAAY,GAAS,KAdhDC,QAAQC,OAAO,eAAgB,cAAe,wBAK9CpC,EAAgB8B,SAAW,SAAU,WAAY,SAAU,YAAa,kBAwCxEK,QACGC,OAAO,eACPR,WAAW,kBAAmB5B","file":"Main.js","sourcesContent":["/* -*- Mode: javascript; indent-tabs-mode: nil; c-basic-offset: 2 -*- */\n/* JavaScript for MainUI (SOGoRootPage) */\n\n(function() {\n  'use strict';\n\n  angular.module('SOGo.MainUI', ['SOGo.Common', 'SOGo.Authentication']);\n\n  /**\n   * @ngInject\n   */\n  LoginController.$inject = ['$scope', '$timeout', 'Dialog', '$mdDialog', 'Authentication'];\n  function LoginController($scope, $timeout, Dialog, $mdDialog, Authentication) {\n    var vm = this;\n\n    vm.creds = { username: cookieUsername, password: null };\n    vm.login = login;\n    vm.showAbout = showAbout;\n\n    vm.showLogin = false;\n    $timeout(function() { vm.showLogin = true; }, 100);\n\n    function login() {\n      Authentication.login(vm.creds)\n        .then(function(url) {\n          if (window.location.href === url)\n            window.location.reload(true);\n          else\n            window.location.href = url;\n        }, function(msg) {\n          Dialog.alert(l('Authentication Failed'), msg.error);\n        });\n      return false;\n    }\n\n    function showAbout($event) {\n      $mdDialog.show({\n        targetEvent: $event,\n        templateUrl: 'aboutBox.html',\n        controller: AboutDialogController,\n        controllerAs: 'about'\n      });\n      AboutDialogController.$inject = ['$mdDialog'];\n      function AboutDialogController($mdDialog) {\n        this.closeDialog = function() {\n          $mdDialog.hide();\n        };\n      }\n    }\n  }\n\n  angular\n    .module('SOGo.MainUI')\n    .controller('LoginController', LoginController);\n})();\n"]}